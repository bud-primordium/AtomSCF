# 数值网格与稳定性（线性 vs 对数/指数混合）

本项目当前默认在 SCF 中使用“较密线性网格”（典型 n≈1000、rmax≈60–70）：
- 优点：
  - 配合非均匀网格二阶差分实现相对简单；
  - 与近核强势叠加时数值更稳定（避免某些组合下的离散误差放大）；
  - 便于教学（参数直观，调参成本低）。
- 缺点：
  - 在近核区采样效率不如对数/指数型，可能需要更多点数以达到同等精度。

参考实现（如 dftatom、教程）通常采用对数或多重指数网格，能更高效地解析近核行为。我们已在 `grid.py` 提供对数网格生成（`radial_grid_log`），并在 M0 验证中使用。后续可尝试：
- 引入混合网格（核附近对数/指数，外层线性），并为非均匀 FD 提供更高阶模板；
- 在 SCF 中切换回对数网格，同时加固：
  - 端点处理（避免 r=0）、
  - Hartree 势分段积分的权重构造、
  - 有效势近核发散下的数值抑制（安全下界/自适应步长）。

结论：
- 当前以“稳健+可解释”为第一目标，优先线性网格；
- 完成功能闭环后，将回到网格策略的比较与优化，力争在相同误差下减少点数、加快收敛；
- 相关对比结果将补充在本文件并配套基准脚本。

